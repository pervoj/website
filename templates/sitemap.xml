{%- import 'sitemap-macros.html' as m -%}

<?xml version="1.0" encoding="UTF-8"?>
<urlset
	xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
	xmlns:xhtml="http://www.w3.org/1999/xhtml"
>
	{%- for entry in entries -%}
	{%- set url = entry.permalink | escape_xml | safe -%}
	{%- if m::lang(url = url) == 'en' -%}
	{%- set path = url | replace(from = m::base(url = url), to = '') %}
	<url>
		<loc>{{ url | safe }}</loc>
		{%- if entry.updated %}
		<lastmod>{{ entry.updated }}</lastmod>
		{%- endif -%}

		{%- for entry_x in entries -%}
		{%- set url_x = entry_x.permalink | escape_xml | safe %}
		{%- set path_x = url_x | replace(from = m::base(url = url_x), to = '') -%}
		{%- set lang_x = m::lang(url = url_x) -%}
		{%- if path == path_x and lang_x != "en" %}
		<xhtml:link rel="alternate" hreflang="{{ lang_x | safe }}" href="{{ url_x | safe }}" />
		{%- endif -%}
		{%- endfor %}
	</url>
	{%- endif -%}
	{%- endfor %}
</urlset>
